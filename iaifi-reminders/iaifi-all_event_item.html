<!-- Getting basic event info -->
{% assign talk = include.talk %}
{% assign target_date = include.target_date %}
{% assign event_date = talk.start-date-time | date: "%Y-%m-%d" %}

{% assign matches_target_day = false %}

<!-- Check if event is on the target day -->
{% if target_date == event_date %}
  {% assign matches_target_day = true %}
{% endif %}

{% assign start_date = talk.start-date-time | date: "%A, %B %e, %Y" %}
{% assign end_date   = talk.end-date-time   | date: "%A, %B %e, %Y" %}
{% assign start_time = talk.start-date-time | date: "%l:%M%P" %}
{% assign end_time   = talk.end-date-time   | date: "%l:%M%P" %}

<!-- Determining zoom link -->
{% assign zoom_link = nil %}
{% if talk.talk-zoom %}
  {% assign zoom_link = talk.talk-zoom %}
{% elsif site.data.talk-categories[talk.type].zoom %}
  {% assign zoom_link = site.data.talk-categories[talk.type].zoom %}
{% endif %}

<!-- Event information - only display if matches target day -->
{% if matches_target_day %}
  <div style="margin-bottom: 24px;">
    <!-- Event name (standalone line) -->
    <p>
      <strong>
        {% if talk.event-name %}
          {{ talk.event-name }}
        {% else %}
          {{ site.data.talk-categories[talk.type].name }}
        {% endif %}
      </strong>
      {% if talk.speaker-name %}
        <strong>:
          {% if talk.speaker-website %}
            <a href="{{ talk.speaker-website }}">{{ talk.speaker-name }}</a>
          {% else %}
            {{ talk.speaker-name }}
          {% endif %}
          ({{ talk.speaker-affiliation }})
        </strong>
      {% endif %}
    </p>

    <!-- Bulleted details -->
    <ul style="list-style-type: disc; margin: 0.5rem 0; padding-left: 1.5rem;">
      <li>
        <strong>{{ start_date }}, {{ start_time }} â€“ {{ end_time }},</strong>
        <strong>{{ talk.talk-location }}</strong>
      </li>

      {% if talk.talk-title %}
        <li><em>{{ talk.talk-title }}</em></li>
      {% endif %}

      {% if talk.talk-abstract %}
        <li>Abstract: <em>{{ talk.talk-abstract }}</em></li>
      {% endif %}

      {% if talk.event-details %}
        <li>{{ talk.event-details }}</li>
      {% endif %}
    </ul>

    {% if talk.rsvp-link or zoom_link or talk.calendar-link or talk.more-info-link %}
      <p>
        {% if talk.rsvp-link %}
          <a href="{{ talk.rsvp-link }}" class="button button--outline-primary button--pill button--sm">
            RSVP/Sign Up
          </a>
        {% endif %}
        {% if zoom_link %}
          <a href="{{ zoom_link }}" class="button button--outline-primary button--pill button--sm">
            Join on Zoom
          </a>
        {% endif %}
        {% if talk.calendar-link %}
          <a href="{{ talk.calendar-link }}" class="button button--outline-primary button--pill button--sm">
            Add to Calendar
          </a>
        {% endif %}
        {% if talk.more-info-link %}
          <a href="{{ talk.more-info-link }}" class="button button--outline-primary button--pill button--sm">
            More Details
          </a>
        {% endif %}
      </p>
    {% endif %}
  </div>
{% endif %}
